<!DOCTYPE html>
<html>
<head>
	<title>Career AJS-Voltabio</title>
	<script type="text/javascript" src="bower_components/jquery/dist/jquery.js"></script>
	<script type="text/javascript" src="bower_components/jquery-form/dist/jquery.form.min.js"></script>
	<script type="text/javascript" src="bower_components/jquery-validation/dist/jquery.validate.js"></script>
	<script type="text/javascript">
	$(document).ready(function () {
		var today = new Date();
		$.post("http://localhost/ajs-career/ws/getconfig").then(function (data) {
			var info = $("#info");
			info.append(data[0].getconfig[0].text);
			var config = data[0].getconfig[0];
			var min_date = new Date(config.min_date);
			var max_date = new Date(config.max_date);
			if (min_date <= today && max_date >= today) {
				$.post("http://localhost/ajs-career/ws/getjob").then(function (data) {
					var value = data[0].getjob;
					var select = $("select");
					var requirement = $("#requirement");
					var options = '';
					var req = '';
					for (i in value) {
						options += "<option value='" + value[i].job_id + "'>" + value[i].job_name + "</option>"
						req += "<div><div>" + value[i].job_name + "</div>" + value[i].job_req + "</div>";
					}
					select.append(options);
					requirement.append(req);
				});
			} else {
				$('#upload').html('');
			}
		});
		
		$("#upload").validate();
		$("button").click(function (e) {
			console.log('test', $("#upload").valid());
			// e.preventDefault();
			$("#upload").ajaxForm({
				beforeSubmit: function () {
					console.log('before');
				},
				target: '#info',
				success: function () {
					$("#upload")[0].reset();
				}
			});
		})
	})
	</script>
</head>
<body>
	<div id="info"></div>
	<div id="log"></div>
	<div id="requirement"></div>
	<div id="upload">
		<form method="POST" action="gen/upload.php" enctype="multipart/form-data" id="upload">
			<div>
				<div>Nama</div>
				<input type="text" name="name" required>
			</div>
			<div>
				<div>Alamat</div>
				<input type="text" name="address" required>
			</div>
			<div>
				<div>No KTP</div>
				<input type="text" name="ktp" required>
			</div>
			<div>
				<div>Telephone</div>
				<input type="text" name="phone" required>
			</div>
			<div>
				<div>Email</div>
				<input type="text" name="email" required>
			</div>
			<div>
				<div>Posisi</div>
				<select name="job" required></select>
			</div>
			<div>
				<div>Upload Berkas</div>
				<input type="file" name="file" required>
			</div>
			<button type="submit">SUBMIT</button>
		</form>
	</div>
</body>
</html>